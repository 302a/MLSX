<!--pages/pintuan_details/pintuan_details.wxml-->
<view class="{{show_attr_picker?'no-scroll':''}}">
    <swiper autoplay="{{autoplay}}" bindchange="hide" circular="true" class="goods-image-swiper" duration="300" indicatorActiveColor="#ff5c5c" indicatorDots="true" interval="5000">
        <swiper-item>
            <!-- <image bindtap="onGoodsImageClick" class="goods-image" data-index="{{index}}" mode="aspectFill" src="/images/pintuan_page/4.png"></image>
        </swiper-item>
        <swiper-item>
            <image bindtap="onGoodsImageClick" class="goods-image" data-index="{{index}}" mode="aspectFill" src="/images/pintuan_page/5.png"></image> -->
            <!-- <image bindtap="play" class="play {{img_hide}}" data-url="{{goods.video_url}}" src="/images/video-play.png" wx:if="{{goods.video_url}}"></image> -->
            <image bindtap="onGoodsImageClick" class="goods-image" data-index="{{index}}" mode="aspectFill" src="{{goods.video_url}}"></image>
        </swiper-item>
    </swiper> 
    <view class="flex-row goods-money">
        <view class="flex-grow-0 flex-row flex-y-bottom">
            <view class="flex-grow-0 flex-y-bottom">
                ¥
            </view>
            <view class="flex-grow-1flex-y-bottom goods-money-num">
                {{goods.price}}
            </view>
        </view>
        <view class="flex-col flex-grow-1">
            <view class="flex-grow-0 flex-row original-price">
                <view class="flex-grow-0">
                    ¥
                </view>
                <view class="flex-grow-1">
                    {{goods.original_price}}
                </view>
            </view>
            <view class="flex-row flex-grow-0 group-descount">
                <view class="flex-grow-0 group-descount-one">
                    {{goods.group_num}}人拼团
                </view>
                <view class="flex-grow-0 group-descount-center"></view>
                <view class="flex-grow-0 group-descount-tow">
                    拼团立省¥{{reduce_price}}
                </view>
            </view>
        </view>
        <!-- <button bindtap="showShareModal" class="flex-grow-0 flex-col group-share">
            <view class="flex-grow-0">
                <image src="/images/icon-group-share.png"></image>
            </view>
            <view class="flex-grow-0 group-share-text">
                分享
            </view>
        </button> -->
    </view>
    <view class="flex-row goods-name">
      <text decode='true'>{{goods.name}}</text>
    </view>
    <view bindtap="showAttrPicker" class="goods-attr flex-row flex-y-center">
        <view class="goods-attr-title flex-grow-0 flex-y-center">
            选择
        </view>
        <view class="goods-attr-value flex-grow-1">
            规格
        </view>
        <view class="goods-attr-more flex-grow-0 flex-y-center">
            <image src="http://59.110.218.60/pintuan_page/img-share-right.png"></image>
        </view>
    </view>
    <view class="friend-group">
        <view bindtap="goArticle" class="pt-goods-rule flex-row flex-y-center">
            <view class="pt-rule-title flex-grow-1 flex-y-center">
                支付商品开团，邀请好友参与，成功发货失败退款
            </view>
            <!-- <view class="pt-rule-right flex-grow-0 flex-y-center">
                详细规则
            </view>
            <view class="pt-rule-more flex-grow-0 flex-y-center">
                <image src="/images/pintuan_page/img-share-right.png"></image>
            </view> -->
        </view>
    </view>
    <view class="goods-comment">
        <view bindtap="goToComment" class="goods-comment-title flex-row flex-y-center">
            <view class="comment-left-text flex-grow-1 flex-y-center">
                买家评论{{comment_num}} | 销量 {{goods.virtual_sales}}
            </view>
            <view class="comment-more flex-grow-0 flex-y-center">
                <image src="http://59.110.218.60/pintuan_page/img-share-right.png"></image>
            </view>
        </view>
    </view>
    <view class="pt-goods-content">
        <view class="pt-goods-content-title flex-y-center">
            商品详情
        </view>
        <view class="pt-goods-details">
          <image style='height: 800rpx;width: 100%' bindtap="previewImage1" src='{{goods_url.url1}}'></image>
          <image style='height: 1450rpx;width: 100%' bindtap="previewImage2" src='{{goods_url.url2}}'></image>
        </view>          
    </view>
    <view class="pt-goods-footer flex-row">
        <view bindtap="goHome" class="flex-grow-0 flex-col flex-y-center flex-x-center goods-footer-icon">
            <view class="flex-gorw-0 flex-x-center">
                <image src="http://59.110.218.60/pintuan_page/6.png"></image>
            </view>
            <view class="flex-gorw-0 flex-x-center">
                首页
            </view>
        </view>
        <view bindtap="call_phone" class="flex-grow-0 flex-col flex-y-center flex-x-center goods-footer-icon1">
            <view class="flex-gorw-0 flex-x-center">
                <image src="http://59.110.218.60/pintuan_page/1.png"></image>
            </view>
            <view class="flex-gorw-0 flex-x-center">
                商家
            </view>
        </view>
        <!-- <view class='buy-goods'> -->
          <view bindtap="onlyBuy" class="flex-grow-1 flex-col flex-y-center flex-x-center alone-buy">
              <view class="flex-gorw-0 money">
                  ¥{{goods.original_price}}
              </view>
              <view class="flex-grow-0">
                  直接购买
              </view>
          </view>
          <view bindtap="buyNow" class="flex-grow-1 flex-col flex-y-center flex-x-center group-buy">
              <view class="flex-gorw-0 money">
                  ¥{{goods.price}}
              </view>
              <view class="flex-grow-0">
                  一键开团
              </view>
          </view>
        <!-- </view> -->
    </view>
</view>
<view class="attr-picker" wx:if="{{show_attr_picker}}">
    <view class="content-box">
        <view class="flex-row" style="border-bottom: 1rpx solid #e3e3e3;padding: 24rpx 28rpx">
            <view class="flex-grow-0">
                <view class="goods-pic-box">
                    <!-- <image mode="aspectFill" src="{{goods.attr_pic}}" wx:if="{{goods.attr_pic}}"></image> -->
                    <image src="{{goods.video_url}}"></image>
                </view>
            </view>
            <view class="flex-grow-1" style="padding: 0 24rpx">
                <view style="color:#ff4544;margin-bottom: 12rpx;font-weight: bold">￥{{goods.price}}</view>
                <view style="font-size:9pt">
                    库存{{goods.num}}件
                </view>
            </view>
            <view class="flex-grow-0">
                <view bindtap="hideAttrPicker" class="flex-x-center flex-y-center" style="width: 100rpx;height: 100rpx">
                    <image src="http://59.110.218.60/public_page/icon-close.png" style="width: 30rpx;height: 30rpx"></image>
                </view>
            </view>
        </view>
        <scroll-view scrollY="true" style="max-height: 650rpx;">
            <view style="padding: 24rpx 28rpx">
                <view>
                    <view class="attr-group" wx:if="{{attr_group.attr_list.length>0}}" wx:for="{{attr_group_list}}" wx:for-item="attr_group" style="font-size: 9pt;">
                        <view class="attr-group-name">{{attr_group.attr_group_name}}</view>
                        <view class="attr-list">
                            <text bindtap="attrClick" class="attr-item {{item.checked?'active':''}}" data-group-id="{{attr_group.attr_group_id}}" data-id="{{item.attr_id}}" wx:for="{{attr_group.attr_list}}">{{item.attr_name}}
                                </text>
                        </view>
                    </view>
                </view>
                <view style="height: 0;border-bottom: 1rpx solid #e3e3e3;margin-bottom: 40rpx"></view>
                <view style="padding-bottom: 40rpx" style='font-size: 9pt;'>
                    <view class="flex-row flex-y-center mb-20">
                        <view class="flex-grow-1">数量</view>
                        <view class="flex-grow-0">
                            <view class="flex-row number-input-box">
                                <view bindtap="numberSub" class="flex-grow-0 flex-x-center flex-y-center number-btn number-sub {{form.number<=1?'disabled':''}}">-
                                </view>
                                <view class="flex-grow-0">
                                    <input bindblur="numberBlur" class="flex-grow-1 number-input" min="1" step="1" type="number" value="{{form.number}}"></input>
                                </view>
                                <view bindtap="numberAdd" class="flex-grow-0 flex-x-center flex-y-center number-btn number-add">+
                                </view>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </scroll-view>
    </view>
</view>
